From d0a29dfe335cc2529c4632be5b77b1b5e9ffd522 Mon Sep 17 00:00:00 2001
From: Darren Oh <9472-darrenoh@users.noreply.drupalcode.org>
Date: Thu, 20 Feb 2025 12:24:34 +0000
Subject: [PATCH] Issue #3508008: Add global for command line scripts

---
 .../drupal_cms_installer/drupal_cms_installer.profile      | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/project_template/web/profiles/drupal_cms_installer/drupal_cms_installer.profile b/project_template/web/profiles/drupal_cms_installer/drupal_cms_installer.profile
index 9b38045f..8d2f5c96 100644
--- a/project_template/web/profiles/drupal_cms_installer/drupal_cms_installer.profile
+++ b/project_template/web/profiles/drupal_cms_installer/drupal_cms_installer.profile
@@ -7,6 +7,13 @@ use Drupal\Core\Site\Settings;
 use Drupal\RecipeKit\Installer\Hooks;
 use Drupal\RecipeKit\Installer\Messenger;
 
+/**
+ * Initialize the $install_state global variable. This profile is only enabled
+ * during installation, so this is a reliable way for the recipe runner to know
+ * that installation is in progress when run from the command line.
+ */
+$GLOBALS['install_state'] ??= [];
+
 /**
  * Implements hook_install_tasks().
  */
-- 
GitLab

